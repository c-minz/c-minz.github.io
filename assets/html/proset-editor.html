<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Editor for diagrams of partially ordered sets" />
<meta name="author" content="Christoph Minz" />
<meta name="keywords" content="partial order, partially ordered set, poset, causal set, causet" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The PrOSET Editor</title>

<link rel="stylesheet" href="../css/proset-editor.css">
<link rel="stylesheet" href="../css/main.css">
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link defer="" rel="stylesheet" href="../css/academicons.min.css">
<script type="text/javascript" src="proset-editor.js"></script>

</head>

<body class="fixed-top-nav sticky-bottom-footer" style="padding-top: 57px;" 
	onload="initializeEditor()">
<header>
<nav class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation" 
	id="navbar">
	<div class="container">
		<button class="navbar-toggler collapsed ml-auto" type="button" 
			data-toggle="collapse" data-target="#navbarNav" 
			aria-controls="navbarNav" aria-expanded="false" 
			aria-label="Toggle navigation">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar top-bar"></span>
			<span class="icon-bar middle-bar"></span>
			<span class="icon-bar bottom-bar"></span>
		</button>
		<div class="navbar-collapse text-right" id="navbarNav">
			<ul class="navbar-nav ml-auto flex-nowrap" 
				style="background-color: white;">
				<li class="nav-item"><a class="nav-link" href="#import">Import</a></li>
				<li class="nav-item"><a class="nav-link" href="#edit">Edit</a></li>
				<li class="nav-item"><a class="nav-link" href="#export">Export</a></li>
				<li class="nav-item"><a class="nav-link" href="#help">Help</a></li>
			</ul>
		</div>
	</div>
</nav>
</header>

<div class="container mt-5" role="main">
<div class="post">
	<h1>The P<i>r</i>OSET Editor</h1>
	<p id="subtitle">
		The <b>p</b>artially (<b>r</b>e)<b>o</b>rdered <b>set</b> editor v1.0
	</p>
	<div class="alert alert-danger" role="alert" id="msgJavascript">
		This editor uses JavaScript. Please activated it.
	</div>
	
	
	<!--#######################################################################-->
	<a name="import"><h2>Import</h2></a>
	<form>
		<div class="form-group">
			<div class="form-group">
				<label for="selInputType">
					Generate a diagram of a finite partially ordered set from a
				</label>
				<select class="form-control" id="selInputType" onChange="selectInputType()">
					<option value="predefined" selected>predefined type</option>
					<option value="pcauset">permutation (for a 2D-order)</option>
					<option value="rcauset">permutation and list of removed links</option>
					<option value="causet">permutation and list of links</option>
					<option value="latex" hidden>LaTeX macro</option>
					<option value="matrix" hidden>causal matrix</option>
				</select>
			</div>
			<div class="form-group" id="frmInputPredefined">
				<label for="selInputPredefinedType">Predefined type:</label>
				<div class="form-row">
					<div class="col-7">
						<select class="form-control" id="selInputPredefinedType">
							<option value="chain" selected>n-chain</option>
							<option value="antichain">n-antichain</option value="chain">
							<option value="random">random 2D-order with n elements</option>
							<option value="fence">n-fence</option>
							<option value="polygon" hidden>(regular) n-sided polygon poset</option>
							<option value="simplex" hidden>n-simplex</option>
						</select>
					</div>
					<div class="col-2">
						<div class="input-group-text" 
							id="lblInputOrder" onClick="txtInputOrder.focus()">n =</div>
					</div>
					<div class="col-3">
						<input type="number" class="form-control" id="txtInputOrder"
							 value="1" min="1" max="50" />
					</div>
				</div>
			</div>
			<div class="form-group" id="frmInputPermutation">
				<label for="txtInputPermutation">Permutation:</label>
				<input type="text" class="form-control" id="txtInputPermutation" 
					value="1,2,3"/>
			</div>
			<div class="form-group" id="frmInputRemovedLinks" hidden>
				<label id="lblInputRemovedLinks" for="txtInputRemovedLinks">
					Links removed from the automatic links:
				</label>
				<input type="text" class="form-control" id="txtInputRemovedLinks" />
			</div>
			<div class="form-group" id="frmInputLinks" hidden>
				<label id="lblInputLinks" for="txtInputLinks">Links:</label>
				<input type="text" class="form-control" id="txtInputLinks" />
			</div>
			<div class="form-group" id="frmInputLatex" hidden>
				<label for="txtInputLatex">LaTeX macro:</label>
				<input type="text" class="form-control" id="txtInputLatex" />
			</div>
			<div class="form-group" id="frmInputMatrix" hidden>
				<label for="txtInputMatrix">Order matrix</label>
				<textarea class="form-control" id="txtInputMatrix" rows="5"></textarea>
			</div>
			<button type="button" class="btn btn-primary mb-2"
				id="butGenerate" onClick="generate()">Generate</button>
		</div>
	</form>
	<div class="alert alert-warning" role="alert" id="msgInputError" hidden></div>
	
	
	<!--#######################################################################-->
	<a name="edit"><h2>Edit</h2></a>
	<div class="btn-toolbar" role="toolbar" aria-label="Edit toolbar">
		<div class="btn-group mr-2" role="group" aria-label="Global actions">
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Copy the poset back to the input and revise manually" 
				id="butRevise" onClick="revise()">
				&#x2336; <span class="sr-only">Revise</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Undo the last action (generate, move/remove/add element/link)" 
				id="butUndo" onClick="resetToUndoStep( -1 )" disabled>
				&#x2B8C; <span class="sr-only">Undo</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Redo the last action (generate, move/remove/add element/link)" 
				id="butRedo" onClick="resetToUndoStep( 1 )" disabled>
				&#x2B8E; <span class="sr-only">Redo</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Mirror the diagram horizontally" 
				id="butReflect" onClick="reflect()">
				&#x21C4; <span class="sr-only">Reflect</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Mirror the diagram vertically to get the opposite poset" 
				id="butOpposite" onClick="turnOpposite()">
				&#x21C5; <span class="sr-only">Opposite</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Increase all labels by 1" 
				id="butRaiseOffset" onClick="changeOffset( 1 )">
				&#x2390; <span class="sr-only">Raise labels</span>
			</button>
			<button type="button" class="btn btn-secondary" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Decrease all labels by 1" 
				id="butLowerOffset" onClick="changeOffset( -1 )">
				&#x238F; <span class="sr-only">Lower labels</span>
			</button>
		</div>
		<div class="input-group mr-2">
			<div class="input-group-prepend">
				<button type="button" class="btn btn-secondary" 
					data-toggle="tooltip" data-placement="bottom" 
					title="Delete the selected element" 
					id="butRemoveElement" onClick="removeElement()" disabled>
					&#x2715; <span class="sr-only">Delete</span>
				</button>
			</div>
			<div class="input-group-prepend">
				<div class="input-group-text" 
					id="lblSelection" onClick="txtSelection.focus()">Selection:</div>
			</div>
			<input type="number" class="form-control" width="auto" style="width: 80px;"
				aria-label="Selected element" aria-describedby="lblSelection" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Selected element" 
				id="txtSelection" onChange="resetSelection()"
				value="" min="0" max="10"/>
			<div class="input-group-prepend">
				<button type="button" class="btn btn-secondary" 
					data-toggle="tooltip" data-placement="bottom" 
					title="Link/unlink the selected elements" 
					id="butLink" onClick="changeLink()" disabled>
					&#x2A52; <span class="sr-only">Link/unlink</span>
				</button>
			</div>
			<input type="text" class="form-control" width="auto" style="width: 60px;"
				aria-label="Linked element" aria-describedby="lblLinked" 
				data-toggle="tooltip" data-placement="bottom" 
				title="Selected linked/unlinked element" onChange="redrawPoset()" 
				id="txtLinking" readonly/>
		</div>
	</div>
	<div class="posetcontainer" id="cnvPosetContainer">
		<canvas id="cnvPoset" width="500" height="500"></canvas>
	</div>
	<div class="form-group">
		<div class="input-group mr-2" role="toolbar" aria-label="Settings toolbar">
			<div class="btn-group input-group btn-group-toggle" data-toggle="buttons">
				<label class="btn btn-light" id="lblShowLabels">
					<input type="checkbox" id="chbShowLabels" 
						data-toggle="tooltip" data-placement="top" 
						title="Show element labels" 
						onClick="updateSettingsButton( 'ShowLabels', true )">
						Labels
				</label>
				<label class="btn btn-light active" id="lblShowCross">
					<input type="checkbox" id="chbShowCross" value="1" 
						data-toggle="tooltip" data-placement="top" 
						title="Show selection cross" 
						onClick="updateSettingsButton( 'ShowCross', true )">
						Cross
				</label>
				<label class="btn btn-light" id="lblShowGrid">
					<input type="checkbox" id="chbShowGrid" 
						title="Show poset element grid" 
						onClick="updateSettingsButton( 'ShowGrid', true )">
						Grid
				</labe>
			</div>
		</div>
		<div class="input-group input-group-sm">
			<div class="input-group-prepend">
				<div class="input-group-text">Cardinality:</div>
				<div class="input-group-text" id="lblCard"></div>
				<div class="input-group-text">Permutation:</div>
			</div>
			<input type="text" class="form-control" id="txtPermutation" readonly />
			<button type="button" class="btn btn-sm btn-light"
				id="butCopyPermutation" onClick="copyToClipboard( 'txtPermutation' )">
				&#x23CD; <span class="sr-only">Copy permutation</span>
			</button>
		</div>
		<div class="input-group input-group-sm">
			<div class="input-group-prepend">
				<div class="input-group-text">Links:</div>
			</div>
			<input type="text" class="form-control" id="txtLinks" readonly />
			<button type="button" class="btn btn-sm btn-light"
				id="butCopyLinks" onClick="copyToClipboard( 'txtLinks' )">
				&#x23CD; <span class="sr-only">Copy links</span>
			</button>
		</div>
		<div class="input-group input-group-sm">
			<div class="input-group-prepend">
				<div class="input-group-text">Removed links:</div>
			</div>
			<input type="text" class="form-control" id="txtRemovedLinks" readonly />
			<button type="button" class="btn btn-sm btn-light"
				id="butCopyUnlinks" onClick="copyToClipboard( 'txtRemovedLinks' )">
				&#x23CD; <span class="sr-only">Copy removed links</span>
			</button>
		</div>
	</div>
	
	
	<!--#######################################################################-->
	<a name="export"><h2>Export</h2></a>
	<a name="export_latex"><h3>LaTeX macros</h3></a>
	<p>
		To use the diagram in a LaTeX document (in math or text mode), load the 
		package 'causets' with <code>\usepackage{causets}</code> and use one of the 
		following macros.
	</p>
	<p>
		<div class="form-group" id="frmExportLatex">
			<div class="form-group">
				<label for="selExportLatexStyle">
					Export the LaTeX macros 
				</label>
				<select class="form-control" id="selExportLatexStyle" 
					onChange="updateExport()">
					<option value="">without labels.</option>
					<option value="L">with labels.</option>
					<option value="P">with permutation grid.</option>
					<option value="X">with permutation grid and labels.</option>
				</select>
			</div>
			<div class="form-group" id="frmExport_pcauset" hidden>
				<label for="txtExport_pcauset">
					Diagram where the links are generated from the permutation (single 
					argument):
				</label>
				<div class="input-group">
					<input type="text" class="form-control" id="txtExport_pcauset" readonly />
					<button type="button" class="btn btn-sm btn-light"
						id="butCopyExportPcauset" onClick="copyToClipboard( 'txtExportPcauset' )">
						&#x23CD; <span class="sr-only">Copy pcauset macro</span>
					</button>
				</div>
			</div>
			<div class="form-group" id="frmExport_rcauset" hidden>
				<label for="txtExport_rcauset">
					Diagram where the links are generated from the permutation (first 
					argument) except for the list of links given in the second argument:
				</label>
				<div class="input-group">
					<input type="text" class="form-control" id="txtExport_rcauset" readonly />
					<button type="button" class="btn btn-sm btn-light"
						id="butCopyExportRcauset" onClick="copyToClipboard( 'txtExportRcauset' )">
						&#x23CD; <span class="sr-only">Copy rcauset macro</span>
					</button>
				</div>
			</div>
			<div class="form-group" id="frmExport_causet" hidden>
				<label for="txtExport_causet">
					Diagram where the elements are positioned by the permutation (first 
					argument) and all links are specified explicitly (second argument):
				</label>
				<div class="input-group">
					<input type="text" class="form-control" id="txtExport_causet" readonly />
					<button type="button" class="btn btn-sm btn-light"
						id="butCopyExportCauset" onClick="copyToClipboard( 'txtExportCauset' )">
						&#x23CD; <span class="sr-only">Copy causet macro</span>
					</button>
				</div>
			</div>
		</div>
	</p>
	
	<a name="export_matrix"><h3>Matrices</h3></a>
	<p>
		<div class="form-group" id="frmExportLatex">
			<div class="input-group">
				<select class="form-control" id="selExportMatrixType" 
					onChange="updateExport()">
					<option value="order">Order matrix</option>
					<option value="link">Link matrix</option>
				</select>
				<button type="button" class="btn btn-secondary mb-2"
					id="butExportMatrix" onClick="getExportMatrix()" width="auto">
					Compute
				</button>
			</div>
			<div class="input-group">
				<textarea class="form-control" id="txtExportMatrix" rows="5" readonly>
				</textarea>
				<button type="button" class="btn btn-sm btn-light"
					id="butCopyExportMatrix" onClick="copyToClipboard( 'txtExportMatrix' )">
					&#x23CD; <span class="sr-only">Copy matrix</span>
				</button>
			</div>
		</div>
	</p>
	
	
	<!--#######################################################################-->
	<a name="help"><h2>Help</h2></a>
	<p>
		<b>Tipp</b>: In general, a poset does not have a unique diagram. The best 
		diagrams are obtained by having as few "removed links" as possible. For 
		example, if the poset is 2-dimensional, there exists a diagram with no 
		"removed links".
	</p>
	
	<a name="help_import"><h3>Import options</h3></a>
	<p>
		You can import or generate a diagram from any of the following input types. 
		Note that the number of elements of a diagram is limited. 
		<div class="container">
			<div class="row">
				<div class="col">predefined type</div>
				<div class="col-8">
					Select a predefined type and the cardinality (or order). The numeric 
					input for n is bounded from above, but a larger value could be 
					entered via keyboard.
				</div>
			</div>
			<div class="row">
				<div class="col">permutation (for a 2D-order)</div>
				<div class="col-8">
					Enter a permutation of consecutive integers as a comma-separated list.
				</div>
			</div>
			<div class="row">
				<div class="col">permutation and list of removed links</div>
				<div class="col-8">
					Additionally to a permutation, enter a comma-separated list of link 
					pairs in the format 'number/number' to be excluded when drawing the 
					automatic links from the permuation.
				</div>
			</div>
			<div class="row">
				<div class="col">permutation and list of links</div>
				<div class="col-8">
					The permutation is only used to position the elements. A comma-
					separated list of link pairs (in the format 'number/number') is used 
					to draw links between the elements.
				</div>
			</div>
			<div class="row">
				<div class="col">LaTeX macro</div>
				<div class="col-8">
					Paste a macro from the LaTeX code. The permutation and link list is 
					extracted from this macro.
				</div>
			</div>
			<div class="row">
				<div class="col">order matrix</div>
				<div class="col-8">
					Paste a causal matrix, where each row is a comma-separated list of 
					values 0 and 1, and the rows are separeted by a line break.
				</div>
			</div>
		</div>
	</p>
	
	<a name="help_toolbar"><h3>Toolbar functions</h3></a>
	<p>
		<div class="container">
			<div class="row">
				<div class="col">&#x2336;</div>
				<div class="col-10">
					Copy the poset back to the input and revise manually.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x2B8C;</div>
				<div class="col-10">
					Undo the last actions if it was one of the following: generate, 
					move/remove/add element, remove/add link.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x2B8E;</div>
				<div class="col-10">
					Redo the last actions if it was one of the following: generate, 
					move/remove/add element, remove/add link.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21C4;</div>
				<div class="col-10">
					Mirror the diagram horizontally, which yields an equivalent diagram.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21C5;</div>
				<div class="col-10">
					Mirror the diagram vertically, which yields a diagram of the opposite 
					poset.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x2390;</div>
				<div class="col-10">
					Increase all element labels by 1.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x238F;</div>
				<div class="col-10">
					Decrease all element labels by 1.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x2715;</div>
				<div class="col-10">
					Delete the selected element.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x2A52;</div>
				<div class="col-10">
					Link/unlink the selected elements.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x23CD;</div>
				<div class="col-10">
					Copy the value of a text field to the clipboard.
				</div>
			</div>
		</div>
	</p>
	
	<a name="help_mouse"><h3>Mouse and touchscreen functions</h3></a>
	<p>
		<div class="container">
			<div class="row">
				<div class="col">
					Click on an element to select it.
				</div>
			</div>
			<div class="row">
				<div class="col">
					Click along the 45 degree rays from the selected element to move the 
					it.
				</div>
			</div>
			<div class="row">
				<div class="col">
					Click on an empty area to unselect.
				</div>
			</div>
			<div class="row">
				<div class="col">
					Double click on an element to replace it by a 2-antichain.
				</div>
			</div>
			<div class="row">
				<div class="col">
					Double click on an element while holding the shift key to replace it 
					by a 2-chain.
				</div>
			</div>
		</div>
	</p>
	
	<a name="help_keyboard"><h3>Keyboard functions</h3></a>
	<p>
		<div class="container">
			<div class="row">
				<div class="col">W</div>
				<div class="col-10">
					Select the next element in north-west direction.
				</div>
			</div>
			<div class="row">
				<div class="col">A</div>
				<div class="col-10">
					Select the next element in south-east direction.
				</div>
			</div>
			<div class="row">
				<div class="col">S</div>
				<div class="col-10">
					Select the next element in south-west direction.
				</div>
			</div>
			<div class="row">
				<div class="col">D</div>
				<div class="col-10">
					Select the next element in north-east direction.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21E7; W</div>
				<div class="col-10">
					Move the selected element in north-west direction.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21E7; A</div>
				<div class="col-10">
					Move the selected element in south-east direction.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21E7; S</div>
				<div class="col-10">
					Move the selected element in south-west direction.
				</div>
			</div>
			<div class="row">
				<div class="col">&#x21E7; D</div>
				<div class="col-10">
					Move the selected element in north-east direction.
				</div>
			</div>
			<div class="row">
				<div class="col">Del</div>
				<div class="col-10">
					Delete the selected element.
				</div>
			</div>
			<div class="row">
				<div class="col">.</div>
				<div class="col-10">
					Add a new element to the right of the diagram and select it.
				</div>
			</div>
		</div>
	</p>
	
	<a name="help_about"><h3>About</h3></a>
	<p>
		This editor is to visualise and modify finite partially ordered sets 
		(posets) represented by their Hasse diagrams. 
		It was developed as a tool for a research project and is built on the same 
		methods as the <a href="https://ctan.org/pkg/causets" target="_blank">LaTeX 
		package causets</a>, but the online editor has less functionality. The LaTeX 
		package offers many more options to draw, style and modify Hasse diagrams. 
		More information are given in the package manual.
	</p>
	
	<a name="help_disclaimer"><h3>Disclaimer</h3></a>
	<p>
		This web tool has been tested, but I do not take responsibility for 
		incorrectly represented data. Please send me a comprehensive problem 
		description and information of your browser (name and version) if you 
		encounter an error. 
		<br />
		I also welcome any suggestions to improve the tool.
	</p>
	<p id="editor_copyright">
		Copyright 2024 by <a href="https://c-minz.github.io">Christoph Minz</a>.
		Version v1.0 (revision 2024-07-30).
		<a href="https://c-minz.github.io/impressum">Impressum</a>.
	</p>
</div>
</div>

</body>

</html>
